// Объект с переводами
    const translations = {
      ru: {
        nav_info: "Инфо",
        nav_characters: "Персонажи",
        nav_gallery: "Галерея",
        nav_news: "Новости",
        pre_order: "Pre-order",
        section_news: "Новости",
        section_info: "Инфо",
        section_characters: "Персонажи",
        section_gallery: "Галерея",
        news1_p1: "Друзья, это свершилось! Демо-версия «Под покровом солнца» вышла в Steam! Ссылка для скачивания: store.steampowered.com/app/217816...",
        news1_p2: "Добро пожаловать в уютную и живописную деревню, где время течет медленно и спокойно, словно река, которая тихо протекает по зеленым полям и лесам.",
        news2_p1: "Друзья, это свершилось! Демо-версия «Под покровом солнца» вышла в Steam! Ссылка для скачивания: store.steampowered.com/app/217816...",
        news2_p2: "Добро пожаловать в уютную и живописную деревню, где время течет медленно и спокойно, словно река, которая тихо протекает по зеленым полям и лесам.",
        info_p1: "\"SOLAR DALL\" - визуальная новелла, которая перенесёт тебя в атмосферу деревенской жизни 1982 года. Здесь ты познакомишься с множеством интересных персонажей. Узнаешь много захватывающего об этом загадочном мире и, возможно, даже встретишь свою настоящую любовь! Приготовься окунуться в увлекательное приключение, полное тайн, загадок и даже опасностей.",
        info_p2: "Плиса - это реально существующая деревня в Беларуси, где проживают около 300 человек. Её даже можно найти на карте. Здесь прошло лето автора идеи \"Под покровом солнца\". Каждое лето для него здесь было маленьким и захватывающим приключением. Множество приятных воспоминаний детства легли в основу нашей новеллы. Мы уверены, каждый из вас найдёт здесь что-то родное и знакомое и для себя!",
        char3_name: "Виталик",
        char3_desc: "Виталик — харизматичный и артистичный 16-летний парень, который с легкостью очаровывает девушек. Он пишет стихи, играет на гитаре и всегда находится в центре внимания благодаря своему чувству юмора. Однако за маской романтика скрывается гордый и безответственный юноша, у которого есть особенная цель на это лето. Ради неё он готов пойти на многое, не задумываясь о чувствах других.",
        char3_alt: "Виталик",
        char1_name: "Вика",
        char1_desc: "15-летняя Вика — это `смущённый лучик света` с синими волосами, подстриженными в каре. Она добрая, наивная и очень пугливая, но искренне старается быть дружелюбной. Её главный способ общения с миром — это рисование; в своём альбоме она создаёт целые вселенные, выражая то, что боится сказать вслух.",
        char1_alt: "Вика",
        char2_name: "Саша",
        char2_desc: "Саша — яркая девушка с длинными розовыми волосами и железной целеустремлённостью. Она умна и внимательна, знает больше, чем говорит. Её жизнь не проста, но она не унывает, а берёт ситуацию в свои руки и действует. А ещё у неё очень заразительный смех.",
        char2_alt: "Саша",
        char0_name: "Кристина",
        char0_desc: "Кристина — энергичная и озорная девушка с рыжими хвостиками, которая жить не может без приключений. Умная и начитанная, она обладает богатым воображением и постоянно ищет способ нарушить правила, установленные её строгой матерью. Для неё отношения с парнями — всего лишь небольшой флирт, ведь настоящая страсть Кристины — это жажда адреналина и свободы.",
        char0_alt: "Кристина",
        char4_name: "Давид",
        char4_desc: "Давид — надёжный и добрый парень, настоящий образец для подражания в глазах взрослых. Но только в компании друзей он раскрывает себя настоящего. Несмотря на свои сильные стороны, он становится невероятно застенчивым и нерешительным, когда дело доходит до выражения романтических чувств.",
        char4_alt: "Давид",
        char5_name: "Аня",
        char5_desc: "Аня — высокая и красивая девушка с острым, саркастичным чувством юмора. Она кажется самодостаточной и закрытой, тщательно охраняя своё личное пространство и никогда не показывая истинных мыслей. Мало кто знает, что скрывается за этой маской безразличия…",
        char5_alt: "Аня",
        char6_name: "Лера",
        char6_desc: "Лера — бывшая девушка Виталика и его первая настоящая любовь, оставившая глубокий след в его сердце. Уверенная в себе и обаятельная, она всегда знает, чего хочет, и не боится принимать решения, которые могут ранить других.",
        char6_alt: "Лера",
        gallery_alt_1: "Скриншот 1",
        gallery_alt_2: "Скриншот 2",
        gallery_alt_3: "Скриншот 3",
        gallery_alt_4: "Скриншот 4",
        gallery_alt_5: "Скриншот 5",
        gallery_alt_6: "Скриншот 6",
        gallery_alt_7: "Скриншот 7",
        gallery_alt_8: "Скриншот 8",
        gallery_alt_9: "Скриншот 9",
        gallery_alt_10: "Скриншот 10",
        platforms_title: "Доступно на платформах:",
        logo_alt: "Логотип",
        info_img_alt: "Об игре",
        footer_logo_alt: "Логотип",
        image_counter: "1/10"
      },
      en: {
        nav_info: "Info",
        nav_characters: "Characters",
        nav_gallery: "Gallery",
        nav_news: "News",
        pre_order: "Pre-order",
        section_news: "News",
        section_info: "Info",
        section_characters: "Characters",
        section_gallery: "Gallery",
        news1_p1: "Friends, it happened! The demo version of 'Under the Cover of the Sun' is out on Steam! Download link: store.steampowered.com/app/217816...",
        news1_p2: "Welcome to a cozy and picturesque village where time flows slowly and calmly, like a river quietly flowing through green fields and forests.",
        news2_p1: "Friends, it happened! The demo version of 'Under the Cover of the Sun' is out on Steam! Download link: store.steampowered.com/app/217816...",
        news2_p2: "Welcome to a cozy and picturesque village where time flows slowly and calmly, like a river quietly flowing through green fields and forests.",
        info_p1: "\"SOLAR-PALL\" is a visual novel that will transport you to the atmosphere of village life in 1982. Here you will meet many interesting characters. You will learn a lot of exciting things about this mysterious world and perhaps even find your true love! Get ready to dive into an exciting adventure full of secrets, mysteries and even dangers.",
        info_p2: "Plisa is a real village in Belarus where about 300 people live. You can even find it on the map. This is where the author of 'Under the Cover of the Sun' spent his summer. Every summer here was a small and exciting adventure for him. Many pleasant childhood memories formed the basis of our novel. We are sure that each of you will find something familiar and close to you here!",
        char3_name: "Vitalik",
        char3_desc: "Vitalik is a charismatic and artistic 16-year-old guy who easily charms girls. He writes poetry, plays the guitar, and is always the center of attention thanks to his sense of humor. However, behind the mask of a romantic lies a proud and irresponsible young man with a special goal for the summer. To achieve it, he is willing to go to great lengths, without considering the feelings of others.",
        char3_alt: "Vitalik",
        char1_name: "Vika",
        char1_desc: "15-year-old Vika is a `shy ray of light` with a blue bob haircut. She is kind, naive, and very timid, but she sincerely tries to be friendly. Her main way of communicating with the world is through drawing; in her sketchbook, she creates entire universes, expressing what she is afraid to say out loud.",
        char1_alt: "Vika",
        char2_name: "Sasha",
        char2_desc: "Sasha is a vibrant girl with long pink hair and iron-willed determination. She is smart and observant, knowing more than she lets on. Her life isn't easy, but she doesn't get discouraged; instead, she takes matters into her own hands and acts. And she also has a very infectious laugh.",
        char2_alt: "Sasha",
        char0_name: "Kristina",
        char0_desc: "Kristina is an energetic and mischievous girl with red pigtails who can't live without adventure. Smart and well-read, she has a rich imagination and is constantly looking for ways to break the rules set by her strict mother. For her, relationships with boys are just a bit of flirtation, as Kristina's true passion is the thirst for adrenaline and freedom.",
        char0_alt: "Kristina",
        char4_name: "David",
        char4_desc: "David is a reliable and kind guy, a true role model in the eyes of adults. But it's only in the company of his friends that he reveals his true self. Despite his strengths, he becomes incredibly shy and indecisive when it comes to expressing romantic feelings.",
        char4_alt: "David",
        char5_name: "Anya",
        char5_desc: "Anya is a tall and beautiful girl with a sharp, sarcastic sense of humor. She appears self-sufficient and reserved, carefully guarding her personal space and never showing her true thoughts. Few people know what lies behind this mask of indifference...",
        char5_alt: "Anya",
        char6_name: "Lera",
        char6_desc: "Lera is Vitalik's ex-girlfriend and his first true love, who left a deep mark on his heart. Confident and charming, she always knows what she wants and isn't afraid to make decisions that might hurt others.",
        char6_alt: "Lera",
        gallery_alt_1: "Screenshot 1",
        gallery_alt_2: "Screenshot 2",
        gallery_alt_3: "Screenshot 3",
        gallery_alt_4: "Screenshot 4",
        gallery_alt_5: "Screenshot 5",
        gallery_alt_6: "Screenshot 6",
        gallery_alt_7: "Screenshot 7",
        gallery_alt_8: "Screenshot 8",
        gallery_alt_9: "Screenshot 9",
        gallery_alt_10: "Screenshot 10",
        platforms_title: "Available on platforms:",
        logo_alt: "Logo",
        info_img_alt: "About the game",
        footer_logo_alt: "Logo",
        image_counter: "1/10"
      }
    };

    // Текущий язык
    let currentLang = 'ru';

    function changeLanguage(lang) {
    currentLang = lang;
    updateLangButton(lang);
      
    // Обновляем тексты
    document.querySelectorAll('.lang').forEach(element => {
      const key = element.dataset.key;
      if (translations[lang][key]) {
        if (element.tagName === 'IMG') {
          element.alt = translations[lang][key];
        } else {
          element.textContent = translations[lang][key];
        }
      }
    });

    // Обновляем активный класс в выпадающем меню
    document.querySelectorAll('.lang-option').forEach(option => {
      option.classList.remove('active');
      if (option.dataset.lang === lang) {
        option.classList.add('active');
      }
    });

    // Обновляем выбранного персонажа
    const activeCharacter = document.querySelector('.character.active');
    if (activeCharacter) {
      const characterId = activeCharacter.dataset.id;
      const characterData = translations[lang][`char${characterId}_desc`];
      if (characterData) {
        document.querySelector('.selected-description').innerHTML = `
          <h3>${translations[lang][`char${characterId}_name`]}</h3>
          <p>${characterData}</p>
        `;
      }
    }
  }

    // Переключение персонажей
    const characters = document.querySelectorAll('.character');
    const selectedDescription = document.querySelector('.selected-description');

characters.forEach(character => {
  character.addEventListener('click', function () {
    characters.forEach(c => c.classList.remove('active'));
    this.classList.add('active');

    const characterId = this.dataset.id;
    const characterName = translations[currentLang][`char${characterId}_name`];
    const characterDesc = translations[currentLang][`char${characterId}_desc`];

    // Обновление текста и изображения в новом блоке
    document.getElementById('character-name').textContent = characterName;
    document.getElementById('character-description').textContent = characterDesc;
    const img = document.getElementById('character-image');

    // Сброс старой анимации
    img.classList.remove('character-fade');
    void img.offsetWidth; // Трюк для перезапуска анимации
      
    // Обновляем данные
    img.src = `characters/${parseInt(characterId) + 1}pod_awa.png`;
    img.alt = characterName;
      
    // Применяем новую анимацию
    img.classList.add('character-fade');
    document.getElementById('character-image').alt = characterName;

    // Показываем блок
    document.getElementById('character-info-block').style.display = 'flex';
  });
});

    // Галерея
    const gallerySlider = document.querySelector(".gallery-slider");
    const galleryItems = document.querySelectorAll(".gallery-item");
    const prevArrow = document.querySelector(".gallery-arrow.prev");
    const nextArrow = document.querySelector(".gallery-arrow.next");
    const modal = document.querySelector(".gallery-modal");
    const modalImg = modal.querySelector("img");
    const modalCounter = modal.querySelector(".image-counter");
    const modalPrev = modal.querySelector(".modal-arrow.prev");
    const modalNext = modal.querySelector(".modal-arrow.next");
    const modalClose = modal.querySelector(".modal-close");

    let currentIndex = 0;
    let slidesToShow = 3;
    const totalItems = galleryItems.length;

    function updateSlider() {
      const itemWidth = galleryItems[0].offsetWidth + 20;
      const offset = -currentIndex * itemWidth;
      gallerySlider.style.transform = `translateX(${offset}px)`;
    }

    function goToSlide(index) {
      const maxIndex = totalItems - slidesToShow;
      currentIndex = Math.max(0, Math.min(index, maxIndex));
      updateSlider();
    }

    prevArrow.addEventListener("click", () => goToSlide(currentIndex - 1));
    nextArrow.addEventListener("click", () => goToSlide(currentIndex + 1));

    galleryItems.forEach((item, index) => {
      item.addEventListener("click", () => {
        openModal(index);
      });
    });

    function openModal(index) {
      modal.style.display = "flex";
      document.body.style.overflow = "hidden";
      updateModalImage(index);
    }

    function updateModalImage(index) {
      const imgSrc = galleryItems[index].querySelector("img").src;
      modalImg.src = imgSrc;
      modalCounter.textContent = translations[currentLang].image_counter.replace('1', index + 1);
      currentModalIndex = index;
    }

    let currentModalIndex = 0;

    modalPrev.addEventListener("click", () => {
      const newIndex = (currentModalIndex - 1 + totalItems) % totalItems;
      updateModalImage(newIndex);
    });

    modalNext.addEventListener("click", () => {
      const newIndex = (currentModalIndex + 1) % totalItems;
      updateModalImage(newIndex);
    });

    modalClose.addEventListener("click", () => {
      modal.style.display = "none";
      document.body.style.overflow = "auto";
    });

    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.style.display = "none";
        document.body.style.overflow = "auto";
      }
    });

    document.addEventListener("keydown", (e) => {
      if (modal.style.display === "flex") {
        if (e.key === "ArrowLeft") {
          const newIndex = (currentModalIndex - 1 + totalItems) % totalItems;
          updateModalImage(newIndex);
        } else if (e.key === "ArrowRight") {
          const newIndex = (currentModalIndex + 1) % totalItems;
          updateModalImage(newIndex);
        } else if (e.key === "Escape") {
          modal.style.display = "none";
          document.body.style.overflow = "auto";
        }
      }
    });

    function updateSlidesToShow() {
      if (window.innerWidth < 768) {
        slidesToShow = 1;
      } else if (window.innerWidth < 992) {
        slidesToShow = 2;
      } else {
        slidesToShow = 3;
      }

      const maxIndex = Math.ceil(totalItems / slidesToShow) - 1;
      if (currentIndex > maxIndex) {
        currentIndex = maxIndex;
      }

      updateSlider();
    }

    updateSlidesToShow();
    window.addEventListener("resize", () => {
      updateSlidesToShow();
      updateSlider();
    });

    setTimeout(updateSlider, 100);

    // Переключатель языка
    const langButtons = document.querySelectorAll('.lang-btn');
    langButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        const lang = this.dataset.lang;
        changeLanguage(lang);
      });
    });

    // Инициализация первого персонажа
    document.addEventListener('DOMContentLoaded', function() {
      if (characters.length > 0) {
        const centerIndex = Math.floor(characters.length / 2);
        characters[centerIndex].click();
      }
    });

    // Управление выпадающим меню языка
    const langDropdownBtn = document.getElementById('langDropdownBtn');
    const langDropdownContent = document.querySelector('.lang-dropdown-content');
    const currentLangFlag = document.querySelector('.current-lang-flag');
    const currentLangText = document.querySelector('.current-lang-text');

    // Функция для обновления внешнего вида кнопки
    function updateLangButton(lang) {
      currentLangFlag.className = 'current-lang-flag ' + lang;
      currentLangText.textContent = lang.toUpperCase();
    }

    langDropdownBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      langDropdownContent.classList.toggle('show');
      langDropdownBtn.classList.toggle('active');
    });

    // Закрытие меню при клике вне его
    document.addEventListener('click', function(e) {
      if (!langDropdownBtn.contains(e.target) && !langDropdownContent.contains(e.target)) {
        langDropdownContent.classList.remove('show');
        langDropdownBtn.classList.remove('active');
      }
    });

    // Обработка выбора языка в выпадающем меню
    document.querySelectorAll('.lang-option').forEach(option => {
      option.addEventListener('click', function() {
        const lang = this.dataset.lang;
        changeLanguage(lang);
        updateLangButton(lang);
        langDropdownContent.classList.remove('show');
        langDropdownBtn.classList.remove('active');
      });
    });

    // Инициализация при загрузке
    document.addEventListener('DOMContentLoaded', function() {
      updateLangButton(currentLang);
      // Устанавливаем активный язык в меню
      document.querySelectorAll('.lang-option').forEach(option => {
        if (option.dataset.lang === currentLang) {
          option.classList.add('active');
        }
      });
    });